{% extends "layout.jinja2" %}

{% block content %}


    <div class="content">
        <h1><span class="font-semi-bold">Pupil List</span></h1>

    </div>
    <div class="dropdown show">
        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown"
           aria-haspopup="true" aria-expanded="false">
            Pick a Class
        </a>

        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            {% for class_entry in classes_list %}
                <a class="dropdown-item" href="#">{{ class_entry }}</a>
            {% endfor %}
        </div>
    </div>

    <table class="table" id="myTable">
        <thead>
        <th scope='col'><a href="?sort=last_name">Name</a></th>
        <th scope='col'>Class</th>
        {% for capability in capabilities_nice %}
            <th scope='col'><a href="?sort={{ capability }}">{{ capabilities_nice[capability] }}</a></th>
        {% endfor %}
        </thead>
        <tbody>
        <tr>
            <td>Filter:</td>
            <td><a class="btn btn-info" href="?filter=">Clear</a></td>
            {% for capability in capabilities_nice %}
                {% if filter == capability %}
                    <td><a class="btn btn-success"
                           href="?filter={{ capability }}">{{ capabilities_nice[capability] }}</a></td>
                {% else %}
                    <td><a class="btn btn-secondary"
                           href="?filter={{ capability }}">{{ capabilities_nice[capability] }}</a></td>
                {% endif %}
            {% endfor %}
        </tr>
        {% for pupil in pupils %}
            <tr>
                <td>
                    <a href="edit?id={{ pupil.id }}">{{ pupil.first_name }} {{ pupil.last_name }}</a>

                </td>
                <td> {{ pupil['class_info.class_strand'] }} {{ pupil['class_info.class_year'] }}</td>
                {% for capability in capability_list %}
                    <td>
                        {% if pupil[capability] %}
                            <img src="{{ request.static_url('gdpr_permissions:static/tick.png') }}" width="25">
                        {% else %}
                            <img src="{{ request.static_url('gdpr_permissions:static/cross.png') }}" width="25">
                        {% endif %}
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock content %}
